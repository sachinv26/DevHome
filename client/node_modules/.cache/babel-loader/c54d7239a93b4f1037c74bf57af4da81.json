{"ast":null,"code":"import _classCallCheck from\"Z:/DevArena/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"Z:/DevArena/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"Z:/DevArena/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"Z:/DevArena/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{connect}from'react-redux';import TextAreaFieldGroup from'../common/TextAreaFieldGroup';import{addComment}from'../../actions/postActions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CommentForm=/*#__PURE__*/function(_Component){_inherits(CommentForm,_Component);var _super=_createSuper(CommentForm);function CommentForm(props){var _this;_classCallCheck(this,CommentForm);_this=_super.call(this,props);_this.onSubmit=function(e){e.preventDefault();var user=_this.props.auth.user;var postId=_this.props.postId;var newComment={text:_this.state.text,name:user.name,avatar:user.avatar};_this.props.addComment(postId,newComment);_this.setState({text:''});};_this.onChange=function(e){_this.setState({[e.target.name]:e.target.value});};_this.state={text:'',errors:{}};return _this;}_createClass(CommentForm,[{key:\"UNSAFE_componentWillReceiveProps\",value:function UNSAFE_componentWillReceiveProps(newProps){if(newProps.errors){this.setState({errors:newProps.errors});}}},{key:\"render\",value:function render(){var errors=this.state.errors;return/*#__PURE__*/_jsx(\"div\",{className:\"post-form mb-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card card-info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header bg-info text-white\",children:\"Make a comment\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.onSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(TextAreaFieldGroup,{placeholder:\"Type a reply here...\",onChange:this.onChange,value:this.state.text,name:\"text\",error:errors.text})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-outline-success\",children:\"Submit\"})]})})]})});}}]);return CommentForm;}(Component);var mapStateToProps=function mapStateToProps(state){return{auth:state.auth,errors:state.errors};};export default connect(mapStateToProps,{addComment:addComment})(CommentForm);","map":{"version":3,"sources":["Z:/DevArena/client/src/components/post/CommentForm.js"],"names":["React","Component","connect","TextAreaFieldGroup","addComment","CommentForm","props","onSubmit","e","preventDefault","user","auth","postId","newComment","text","state","name","avatar","setState","onChange","target","value","errors","newProps","mapStateToProps"],"mappings":"ohBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CAEA,OAASC,OAAT,KAAwB,aAAxB,CACA,MAAOC,CAAAA,kBAAP,KAA+B,8BAA/B,CACA,OAASC,UAAT,KAA2B,2BAA3B,C,2FAEMC,CAAAA,W,0GACF,qBAAYC,KAAZ,CAAmB,6CACf,uBAAMA,KAAN,EADe,MAcnBC,QAdmB,CAcR,SAAAC,CAAC,CAAI,CACZA,CAAC,CAACC,cAAF,GADY,GAGJC,CAAAA,IAHI,CAGK,MAAKJ,KAAL,CAAWK,IAHhB,CAGJD,IAHI,IAIJE,CAAAA,MAJI,CAIO,MAAKN,KAJZ,CAIJM,MAJI,CAMZ,GAAMC,CAAAA,UAAU,CAAG,CACfC,IAAI,CAAE,MAAKC,KAAL,CAAWD,IADF,CAEfE,IAAI,CAAEN,IAAI,CAACM,IAFI,CAGfC,MAAM,CAAEP,IAAI,CAACO,MAHE,CAAnB,CAMA,MAAKX,KAAL,CAAWF,UAAX,CAAsBQ,MAAtB,CAA8BC,UAA9B,EACA,MAAKK,QAAL,CAAc,CAAEJ,IAAI,CAAE,EAAR,CAAd,EACH,CA5BkB,OA8BnBK,QA9BmB,CA8BR,SAAAX,CAAC,CAAI,CACZ,MAAKU,QAAL,CAAc,CAAE,CAACV,CAAC,CAACY,MAAF,CAASJ,IAAV,EAAiBR,CAAC,CAACY,MAAF,CAASC,KAA5B,CAAd,EACH,CAhCkB,CAEf,MAAKN,KAAL,CAAa,CACTD,IAAI,CAAE,EADG,CAETQ,MAAM,CAAE,EAFC,CAAb,CAFe,aAMlB,C,wEAED,0CAAiCC,QAAjC,CAA2C,CACvC,GAAIA,QAAQ,CAACD,MAAb,CAAqB,CACjB,KAAKJ,QAAL,CAAc,CAAEI,MAAM,CAAEC,QAAQ,CAACD,MAAnB,CAAd,EACH,CACJ,C,sBAsBD,iBAAS,IACGA,CAAAA,MADH,CACc,KAAKP,KADnB,CACGO,MADH,CAGL,mBACI,YAAK,SAAS,CAAC,gBAAf,uBACI,aAAK,SAAS,CAAC,gBAAf,wBACI,YAAK,SAAS,CAAC,gCAAf,4BADJ,cAEI,YAAK,SAAS,CAAC,WAAf,uBACI,cAAM,QAAQ,CAAE,KAAKf,QAArB,wBACI,YAAK,SAAS,CAAC,YAAf,uBACI,KAAC,kBAAD,EACI,WAAW,CAAC,sBADhB,CAEI,QAAQ,CAAE,KAAKY,QAFnB,CAGI,KAAK,CAAE,KAAKJ,KAAL,CAAWD,IAHtB,CAII,IAAI,CAAC,MAJT,CAKI,KAAK,CAAEQ,MAAM,CAACR,IALlB,EADJ,EADJ,cAUI,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,yBAAhC,oBAVJ,GADJ,EAFJ,GADJ,EADJ,CAuBH,C,yBA7DqBb,S,EAuE1B,GAAMuB,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAAAT,KAAK,QAAK,CAC9BJ,IAAI,CAAEI,KAAK,CAACJ,IADkB,CAE9BW,MAAM,CAAEP,KAAK,CAACO,MAFgB,CAAL,EAA7B,CAKA,cAAepB,CAAAA,OAAO,CAClBsB,eADkB,CAElB,CAAEpB,UAAU,CAAVA,UAAF,CAFkB,CAAP,CAGbC,WAHa,CAAf","sourcesContent":["import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport TextAreaFieldGroup from '../common/TextAreaFieldGroup';\r\nimport { addComment } from '../../actions/postActions';\r\n\r\nclass CommentForm extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            text: '',\r\n            errors: {}\r\n        };\r\n    }\r\n\r\n    UNSAFE_componentWillReceiveProps(newProps) {\r\n        if (newProps.errors) {\r\n            this.setState({ errors: newProps.errors });\r\n        }\r\n    }\r\n\r\n    onSubmit = e => {\r\n        e.preventDefault();\r\n\r\n        const { user } = this.props.auth;\r\n        const { postId } = this.props;\r\n\r\n        const newComment = {\r\n            text: this.state.text,\r\n            name: user.name,\r\n            avatar: user.avatar\r\n        };\r\n\r\n        this.props.addComment(postId, newComment);\r\n        this.setState({ text: '' });\r\n    };\r\n\r\n    onChange = e => {\r\n        this.setState({ [e.target.name]: e.target.value });\r\n    };\r\n\r\n    render() {\r\n        const { errors } = this.state;\r\n\r\n        return (\r\n            <div className=\"post-form mb-3\">\r\n                <div className=\"card card-info\">\r\n                    <div className=\"card-header bg-info text-white\">Make a comment</div>\r\n                    <div className=\"card-body\">\r\n                        <form onSubmit={this.onSubmit}>\r\n                            <div className=\"form-group\">\r\n                                <TextAreaFieldGroup\r\n                                    placeholder=\"Type a reply here...\"\r\n                                    onChange={this.onChange}\r\n                                    value={this.state.text}\r\n                                    name=\"text\"\r\n                                    error={errors.text}\r\n                                />\r\n                            </div>\r\n                            <button type=\"submit\" className=\"btn btn-outline-success\">\r\n                                Submit\r\n                            </button>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nCommentForm.propTypes = {\r\n    addPost: PropTypes.func.isRequired,\r\n    auth: PropTypes.object.isRequired,\r\n    postId: PropTypes.string.isRequired,\r\n    errors: PropTypes.object.isRequired\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n    auth: state.auth,\r\n    errors: state.errors\r\n});\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    { addComment }\r\n)(CommentForm);\r\n"]},"metadata":{},"sourceType":"module"}